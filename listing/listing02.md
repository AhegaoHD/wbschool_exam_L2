Что выведет программа? Объяснить вывод программы. Объяснить как работают defer’ы и их порядок вызовов.

```go
package main

import (
	"fmt"
)


func test() (x int) {
	defer func() {
		x++
	}()
	x = 1
	return
}


func anotherTest() int {
	var x int
	defer func() {
		x++
	}()
	x = 1
	return x
}


func main() {
	fmt.Println(test())
	fmt.Println(anotherTest())
}
```

Ответ:  
В Go, ключевое слово defer используется для отложенного вызова функции до того момента, когда функция, в которой она была вызвана, завершает выполнение, либо через return, либо достигая конца своего тела, либо через вызов panic.

Отложенные вызовы выполняются в порядке LIFO (последний пришёл - первый ушёл), то есть последний defer в функции будет выполнен первым.

Давайте посмотрим, что делает каждая из функций:

Функция test объявляет именованный возвращаемый параметр x. Она устанавливает x равным 1, и затем есть отложенный вызов, который увеличивает x на 1. Важно отметить, что return в именованных возвращаемых параметрах фактически возвращает текущее значение x после выполнения всех defer. Таким образом, test() возвращает x, который был увеличен отложенным вызовом после установки x = 1. Поэтому test() вернёт 2.

Функция anotherTest использует локальную переменную x без именования возвращаемого значения. Здесь, несмотря на то, что defer увеличивает x после установки x = 1, значение x увеличивается после того, как функция уже подготовила значение для возврата. В этом случае, значение, которое возвращается (return x) — это значение до того, как defer был выполнен, так как x возвращается по значению, а не по ссылке. Таким образом, anotherTest() вернёт 1.
```
2
1
```
